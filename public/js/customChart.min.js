var element=$("#linechart-homepage"),widthOfParent=element.parent().width(),width=widthOfParent,height=200,data=[{xValue:"2012",chart1:"200",chart2:"200"},{xValue:"2013",chart1:"1100",chart2:"1800"},{xValue:"2014",chart1:"2900",chart2:"5000"},{xValue:"2015",chart1:"2900",chart2:"4000"}],createLineChart=function(t){function a(){return d3.svg.axis().scale(l).orient("left").ticks(5)}var r=(d3.select("#linechart-homepage").append("svg").attr("width",width).attr("height",height).attr("id","visualization"),d3.select("#visualization")),e={top:20,right:20,bottom:20,left:50},n=d3.scale.ordinal().rangeRoundBands([0,width-50],0),l=d3.scale.linear().range([height-e.top,e.bottom]),c=d3.svg.axis().orient("bottom").scale(n).ticks(2),i=d3.svg.axis().orient("left").scale(l).ticks(6);t.forEach(function(t){t.xValue=t.xValue,t.chart1=+t.chart1,t.chart2=+t.chart2});var d=d3.max(t,function(t){return t.chart2});n.domain(t.map(function(t){return t.xValue})),l.domain([0,d]),r.append("svg:g").attr("class","axis").attr("transform","translate("+e.left+","+(height-e.bottom)+")").call(c),r.append("svg:g").attr("class","axis").attr("transform","translate("+e.left+",0)").call(i),r.append("svg:g").attr("class","grid").attr("transform","translate("+e.left+",0)").call(a().tickSize(-width,0,0).tickFormat(""));var o=d3.svg.line().x(function(t){return n(t.xValue)}).y(function(t){return l(t.chart1)});r.append("svg:path").attr("d",o(t)).attr("transform","translate("+(e.left+57)+",0)").attr("stroke","grey").attr("stroke-width",2).attr("fill","none");var u=d3.svg.line().x(function(t){return n(t.xValue)}).y(function(t){return l(t.chart2)});r.append("svg:path").attr("d",u(t)).attr("transform","translate("+(e.left+57)+",0)").attr("stroke","#ccc").attr("stroke-width",2).attr("fill","none"),r.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart1}).attr("r",3).attr("fill","blue").attr("cx",function(t){return n(t.xValue)+(e.left+57)}).attr("cy",function(t){return l(t.chart1)}),r.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",3).attr("fill","red").attr("cx",function(t){return n(t.xValue)+(e.left+57)}).attr("cy",function(t){return l(t.chart2)})};createLineChart(data);var data1=[{name:"moldocds",value:"1400"},{name:"moldocds1",value:"1300"},{name:"moldocds2",value:"1200"},{name:"moldocds3",value:"1100"},{name:"moldocds4",value:"1000"}],data2=[{name:"ocds",value:"1400"},{name:"ocds1",value:"1300"},{name:"ocds2",value:"1200"},{name:"ocds3",value:"1100"},{name:"ocds4",value:"1000"}],createBarChartProcuring=function(t,a){var r,e,n,l=d3.max(t,function(t){return t.value}),c="#"+a,i=$(c).parent().width(),d=i,o=37,u=o*t.length;d3.select("#main").node();$(c).html(""),r=d3.select(c).append("svg").attr("class","chart").attr("width",d).attr("height",u),e=d3.scale.linear().domain([0,l]).range([0,d-151]),n=d3.scale.ordinal().rangeBands([0,u]),r.selectAll("rect").data(t).enter().append("rect").attr("x",150).attr("y",function(a,r){return r*(u/t.length)}).attr("width",function(t){return e(t.value)}).attr("height",o-12).attr("id",function(t,a){return t.name}),r.selectAll("text.value").data(t).enter().append("text").text(function(t){return d3.format(",")(Math.round(t.value))}).attr("y",function(a,r){return r*(u/t.length)}).attr("dx",153).attr("dy",o-21).attr("class","value").attr("id",function(t,a){return t.name}),r.selectAll("text.name").data(t).enter().append("text").text(function(t){return null!=t.name&&t.name.length>20?String(t.name).slice(0,20)+"...":String(t.name).slice(0,20)}).attr("y",function(a,r){return r*(u/t.length)}).attr("dx",0).attr("dy",o-21).attr("class","name").attr("id",function(t,a){return t.name})};createBarChartProcuring(data1,"barChart-procuring"),createBarChartProcuring(data2,"barChart-contractors"),createBarChartProcuring(data2,"barChart-goods");