var API={post:function(t,e){return $.ajax({url:t,data:e,type:"POST"})},get:function(t,e,a){return $.ajax({url:t,data:e,async:"undefined"==typeof a?!0:a,type:"GET"})},"delete":function(t,e){return $.ajax({url:t,data:e,type:"DELETE"})}},widthOfParent=$(".chart-wrap").width();$("#select-contractor").change(function(){var t=$(this).val(),e=$(this).attr("data-for"),a=$(this).attr("data"),i={filter:t,type:"contractor",dataFor:e,param:a};API.get(route,i).success(function(e){$("#barChart-contractors").empty(),createBarChartProcuring(JSON.parse(e),"barChart-contractors","contracts/contractor",widthOfParent,t)})}),$("#select-agency").change(function(){var t=$(this).val(),e=$(this).attr("data-for"),a=$(this).attr("data"),i={filter:t,type:"agency",dataFor:e,param:a};API.get(route,i).success(function(e){$("#barChart-procuring").empty(),createBarChartProcuring(JSON.parse(e),"barChart-procuring","procuring-agency",widthOfParent,t)})}),$("#select-goods").change(function(){var t=$(this).val(),e=$(this).attr("data-for"),a=$(this).attr("data"),i={filter:t,type:"goods",dataFor:e,param:a};API.get(route,i).success(function(e){$("#barChart-goods").empty(),createBarChartProcuring(JSON.parse(e),"barChart-goods","goods",widthOfParent,t)})}),$(document).ready(function(){function t(){$(window).width()>768&&$(".persist-area").each(function(){var t=$(this),e=t.offset(),a=$(window).scrollTop(),i=$(".floatingHeader",this);if(a>e.top&&a<e.top+t.height()){i.css({visibility:"visible"});var n=$(".floatingHeader"),o=n.siblings(".persist-header");$("th",o).each(function(t){$("th",n).eq(t).css("width",$(this).outerWidth())})}else i.css({visibility:"hidden"})})}$(".burger-menu").click(function(){$("#main-menu .menu").slideToggle(300),$(".header-banner .fixed-header").toggleClass("add-background"),$(this).toggleClass("menu-on")}),$(".search-button").click(function(){$(window).width()>768?($(this).parent().toggleClass("open"),$(".fixed-header .menu").toggleClass("toggle-visibility")):($(this).parent().toggleClass("open"),$(".fixed-header .top-bar-left").toggleClass("toggle-visibility-small"),$(".burger-menu-button").toggleClass("toggle-visibility-small"))}),$(document).mouseup(function(t){var e=$(".search,.filter-toggler,.advance-search-wrap");e.is(t.target)||0!==e.has(t.target).length||(e.removeClass("open"),$(".fixed-header .menu").removeClass("toggle-visibility"),$(".fixed-header .top-bar-left").removeClass("toggle-visibility-small"),$(".burger-menu-button").removeClass("toggle-visibility-small"),$(".advance-search-wrap").slideUp(),$(".filter-toggler a").removeClass("active"),$(".multiple-search-wrap").removeClass("position"))}),$(window).scroll(function(){var t=$(".header-banner").outerHeight()-68;$(document).scrollTop()>t?$("header.top-bar").css("background-color","#0046AE"):$(document).scrollTop()>67?$("header.top-bar").css("background-color","rgba(0,66,177,0.8)"):$("header.top-bar").css("background-color","transparent")});var e=function(){if($(window).width()>640){var t=$("#status").width(),e=t+40;headerWidth=$("#status").parents(".row").width()-e,$("#left-header").width(headerWidth)}};e(),$(".show-filter").click(function(){$(this);$(".advance-search-wrap").slideToggle(),$(".filter-toggler a").toggleClass("active"),$(window).width()>768&&$(".multiple-search-wrap").toggleClass("position")}),$(".toggle-switch").click(function(t){var e=this;t.preventDefault(),$(e).toggleClass("toggle--on").toggleClass("toggle--off").addClass("toggle--moving"),setTimeout(function(){$(e).removeClass("toggle--moving")},200),$(".toggle--on").parents(".custom-switch-wrap").find(".json-view").show(),$(".toggle--on").parents(".custom-switch-wrap").find(".table-view").hide(),$(".toggle--off").parents(".custom-switch-wrap").find(".json-view").hide(),$(".toggle--off").parents(".custom-switch-wrap").find(".table-view").show()});var a=function(){$(window).width()<775?$(".tabs-content .tabs-panel").addClass("is-active"):($("#panel2").removeClass("is-active"),$("#panel1-label").addClass("is-active"))};a();var i=function(){$(window).width()<768&&($(".main-content").removeClass("menu-on"),$("#main-menu .menu").slideUp(300),$(".burger-menu").removeClass("menu-on"))};$(".main-content").click(function(){i()}),i();var n=function(){function t(t){return document.querySelectorAll(t)}var e=t(".modal__trigger"),a=t(".modal"),i=t(".modal__bg"),n=t(".modal__content"),o=(t(".modal__close"),window),r=!1,s=400,l=e.length,c=function(t){t.preventDefault();var e=this,a=e.dataset.modal,i=a.length,n=a.substring(1,i),o=document.getElementById(n);d(e,o)},d=function(t,e){var a=document.getElementById("modal__temp");if(null===a){var i=document.createElement("div");i.id="modal__temp",t.appendChild(i),h(t,e,i)}},h=function(t,e,a){var i,n,r,l,c=t.getBoundingClientRect(),d=e,h=d.querySelector(".modal__content").getBoundingClientRect(),u=o.innerWidth/2,f=o.innerHeight/2;t.classList.add("modal__trigger--active"),r=h.width/c.width,l=h.height/c.height,r=r.toFixed(3),l=l.toFixed(3),i=Math.round(u-c.left-c.width/2),n=Math.round(f-c.top-c.height/2),d.classList.contains("modal--align-top")&&(n=Math.round(h.height/2+h.top-c.top-c.height/2)),t.style.transform="translate("+i+"px, "+n+"px)",t.style.webkitTransform="translate("+i+"px, "+n+"px)",a.style.transform="scale("+r+","+l+")",a.style.webkitTransform="scale("+r+","+l+")",window.setTimeout(function(){window.requestAnimationFrame(function(){g(d,a)})},s)},g=function(t,e){function a(){e.style.opacity="0",i.removeEventListener("transitionend",a,!1)}if(!r){var i=t.querySelector(".modal__content");t.classList.add("modal--active"),i.classList.add("modal__content--active"),i.addEventListener("transitionend",a,!1),r=!0}},u=function(t){function i(){setTimeout(function(){window.requestAnimationFrame(function(){c.remove()})},s-50)}t.preventDefault(),t.stopImmediatePropagation();var o=t.target,c=document.getElementById("modal__temp");if(r&&o.classList.contains("modal__bg")||o.classList.contains("modal__close")){console.log("clicked close"),c.style.opacity="1",c.removeAttribute("style");for(var d=0;l>d;d++)a[d].classList.remove("modal--active"),n[d].classList.remove("modal__content--active"),e[d].style.transform="none",e[d].style.webkitTransform="none",e[d].classList.remove("modal__trigger--active");c.addEventListener("transitionend",i,!1),r=!1}},f=function(){for(var t=0;l>t;t++)e[t].addEventListener("click",c,!1),i[t].addEventListener("click",u,!1)},m=function(){f()};return{init:m}}();n.init(),$(function(){var e;$(".persist-area").each(function(){e=$(".persist-header",this),e.before(e.clone()).css("width",e.width()).addClass("floatingHeader")}),$(window).scroll(t).trigger("scroll")}),$(".chart-wrap").each(function(){var t=$(this).find("svg");0==t.length&&($(this).addClass("default-view"),$(this).find(".filter-section").hide(),$(this).find(".loader-text").show(),$(".default-view").parents(".each-chart-section").css("height","400px"))}),$(document).ready(function(){$(".chart-wrap").each(function(){var t=$(this).find("svg");0!=t.length&&($(this).removeClass("default-view"),$(this).find(".filter-section").show(),$(this).find(".loader-text").hide(),$(".default-view").parents(".each-chart-section").css("height","auto"))})}),$(".jTable .main-title").each(function(){$(this).parent().addClass("main-title-wrap")}),$(window).resize(function(){e(),a(),i()})});